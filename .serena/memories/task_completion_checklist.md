# 任务完成检查清单

## 编码完成后必须执行的步骤

### 1. 代码质量检查

#### ESLint 检查
```bash
npm run lint
```
- ✅ 确保没有 ESLint 错误
- ✅ 修复所有警告（或有合理理由忽略）
- ✅ 遵循项目的命名约定

#### TypeScript 编译
```bash
npm run compile
```
- ✅ 确保编译成功，无类型错误
- ✅ 检查并修复所有类型警告
- ✅ 确保严格模式下无错误

### 2. 测试

#### 运行测试套件
```bash
npm test
```
- ✅ 所有现有测试通过
- ✅ 新功能添加了相应的测试
- ✅ 测试覆盖率保持或提高

#### 测试覆盖率
```bash
npm run test:coverage
```
- ✅ 查看覆盖率报告
- ✅ 确保关键代码路径被覆盖
- ✅ 目标：保持高覆盖率

### 3. 功能验证

#### 手动测试
1. **启动扩展开发主机** (按 F5)
2. **在测试项目中验证功能**:
   - ✅ 新功能按预期工作
   - ✅ 现有功能未被破坏
   - ✅ UI 元素正确显示
   - ✅ 错误处理正常工作
   - ✅ 跨平台兼容性（如适用）

#### CLI 回退测试
- ✅ 在 MCP 不可用时测试 CLI 回退
- ✅ 确保所有操作都有回退机制
- ✅ 验证错误消息清晰有用

### 4. 代码审查

#### 自我审查清单
- ✅ 代码遵循项目的代码风格和约定
- ✅ 函数和类有单一、清晰的职责
- ✅ 复杂逻辑有注释说明
- ✅ 没有调试代码（console.log 等）
- ✅ 没有注释掉的代码
- ✅ 没有硬编码的值（使用配置或常量）
- ✅ 错误处理完善
- ✅ 资源正确释放（无内存泄漏）

#### 设计原则检查
- ✅ **KISS**: 解决方案足够简单
- ✅ **YAGNI**: 只实现了需要的功能
- ✅ **SOLID**: 遵循 SOLID 原则
- ✅ **DRY**: 避免代码重复

### 5. 文档更新

#### 代码文档
- ✅ 公共 API 有 JSDoc 注释
- ✅ 复杂逻辑有解释性注释
- ✅ 类型定义清晰准确

#### 项目文档
- ✅ 更新 README.md（如有新功能）
- ✅ 更新 CHANGELOG.md
- ✅ 更新相关的 .md 文件（如有必要）
- ✅ 检查文档的中文翻译

### 6. 版本控制

#### Git 提交
```bash
# 查看更改
git status
git diff

# 暂存更改
git add .

# 提交（使用有意义的消息）
git commit -m "feat: 添加新功能描述"
# 或
git commit -m "fix: 修复问题描述"
# 或
git commit -m "docs: 更新文档描述"
# 或
git commit -m "refactor: 重构描述"
# 或
git commit -m "test: 测试描述"
```

#### 提交消息格式
- 使用 Conventional Commits 格式
- 类型: feat, fix, docs, style, refactor, test, chore
- 简洁描述更改的内容和原因

### 7. 构建验证

#### 生产构建
```bash
npm run vscode:prepublish
```
- ✅ 生产构建成功
- ✅ 输出文件正确生成在 `out/` 目录

#### 打包测试
```bash
npm run package
```
- ✅ .vsix 文件成功创建
- ✅ 安装打包的扩展并测试

### 8. 国际化检查（如涉及 UI）

- ✅ 所有用户可见的文本使用中文
- ✅ 错误消息已翻译
- ✅ UI 标签已翻译
- ✅ 保持技术术语一致性

## 特殊情况检查

### 涉及 MCP 集成
- ✅ MCP 协议通信正常
- ✅ CLI 回退机制工作
- ✅ 错误恢复优雅

### 涉及文件系统操作
- ✅ 文件监视器正常工作
- ✅ 自动刷新功能正常
- ✅ 跨平台路径处理正确

### 涉及 VS Code API
- ✅ 命令正确注册
- ✅ 菜单项正确显示
- ✅ 配置选项工作正常
- ✅ WebView 渲染正确

## 最终检查

在提交 PR 或发布前：
- ✅ 所有上述检查项已完成
- ✅ 没有遗留的 TODO 或 FIXME（或已记录）
- ✅ 代码已推送到远程仓库
- ✅ CI/CD 测试通过（如适用）
- ✅ 团队成员审查通过（如适用）
